<%- include("./partials/header.ejs") %>
<body class="details-page">

    <%- include("./partials/Nav.ejs") %>

    <div class="container">
        <div class="blog-details">
            <h1><%= blog.title %></h1>
            <h3>By <%= blog.author %></h3>
            <p><%= blog.content %></p>
            <a class="delete" data-doc="<%= blog._id %>">Delete</a>
        </div>
    </div>
</body>

<script>
    const trash = document.querySelector("a.delete");
    trash.addEventListener('click', (e)=>{
        const endpoint = `/blogs/${trash.dataset.doc}`

        fetch(endpoint , {
            method : 'DELETE' 
        })
        .then(response => response.json())
        .then(data => window.location.href = data.redirect)
        .catch(err => console.log(err))
    })
</script>
</html>
